import { LanguageChallenge } from './types';

export const sqlChallenges: LanguageChallenge = {
  language: 'sql',
  displayName: 'SQL',
  icon: 'ðŸ—„ï¸',
  color: 'from-blue-500 to-indigo-600',
  levels: [
    {
      level: 1,
      title: 'SQL Basics',
      description: 'SELECT statements and basic queries',
      passingScore: 70,
      mcqs: [
        { id: 'sql1-1', question: 'What does SQL stand for?', options: ['Structured Query Language', 'Simple Query Language', 'Standard Query Language', 'Sequential Query Language'], correctAnswer: 0 },
        { id: 'sql1-2', question: 'Which command retrieves data from a table?', options: ['GET', 'FETCH', 'SELECT', 'RETRIEVE'], correctAnswer: 2 },
        { id: 'sql1-3', question: 'What does SELECT * mean?', options: ['Select nothing', 'Select all columns', 'Select first column', 'Select last column'], correctAnswer: 1 },
        { id: 'sql1-4', question: 'Which clause filters rows?', options: ['FILTER', 'WHERE', 'HAVING', 'LIMIT'], correctAnswer: 1 },
        { id: 'sql1-5', question: 'How to select distinct values?', options: ['SELECT UNIQUE', 'SELECT DISTINCT', 'SELECT DIFFERENT', 'SELECT SINGLE'], correctAnswer: 1 },
        { id: 'sql1-6', question: 'Which operator is used for pattern matching?', options: ['MATCH', 'LIKE', 'PATTERN', 'SIMILAR'], correctAnswer: 1 },
        { id: 'sql1-7', question: 'What does % mean in LIKE?', options: ['Single character', 'Any characters', 'No characters', 'Numbers only'], correctAnswer: 1 },
        { id: 'sql1-8', question: 'What does _ mean in LIKE?', options: ['Any characters', 'Single character', 'No characters', 'Letters only'], correctAnswer: 1 },
        { id: 'sql1-9', question: 'How to sort results ascending?', options: ['ORDER BY col ASC', 'SORT BY col ASC', 'ARRANGE BY col ASC', 'ORDER col ASC'], correctAnswer: 0 },
        { id: 'sql1-10', question: 'How to sort results descending?', options: ['ORDER BY col DESC', 'SORT BY col DESC', 'ORDER BY col DOWN', 'ORDER BY col REVERSE'], correctAnswer: 0 },
        { id: 'sql1-11', question: 'How to limit number of rows?', options: ['LIMIT n', 'TOP n', 'FIRST n', 'All of above (varies by DB)'], correctAnswer: 3 },
        { id: 'sql1-12', question: 'What is NULL in SQL?', options: ['Zero', 'Empty string', 'Unknown/missing value', 'False'], correctAnswer: 2 },
        { id: 'sql1-13', question: 'How to check for NULL?', options: ['= NULL', 'IS NULL', '== NULL', 'EQUALS NULL'], correctAnswer: 1 },
        { id: 'sql1-14', question: 'What is NOT NULL?', options: ['Null value', 'Non-null value', 'Zero', 'Empty'], correctAnswer: 1 },
        { id: 'sql1-15', question: 'How to combine conditions with AND?', options: ['WHERE a AND b', 'WHERE a && b', 'WHERE a + b', 'WHERE a & b'], correctAnswer: 0 },
        { id: 'sql1-16', question: 'How to combine conditions with OR?', options: ['WHERE a OR b', 'WHERE a || b', 'WHERE a | b', 'WHERE a + b'], correctAnswer: 0 },
        { id: 'sql1-17', question: 'What does BETWEEN do?', options: ['Excludes range', 'Includes range', 'Exact match', 'Pattern match'], correctAnswer: 1 },
        { id: 'sql1-18', question: 'What does IN operator do?', options: ['Pattern match', 'Range check', 'List membership', 'Null check'], correctAnswer: 2 },
        { id: 'sql1-19', question: 'How to negate a condition?', options: ['NOT', '!', 'NEGATE', 'REVERSE'], correctAnswer: 0 },
        { id: 'sql1-20', question: 'What is an alias?', options: ['Table copy', 'Temporary name', 'Permanent name', 'Index'], correctAnswer: 1 },
        { id: 'sql1-21', question: 'How to create column alias?', options: ['AS alias', 'ALIAS alias', 'NAME alias', '= alias'], correctAnswer: 0 },
        { id: 'sql1-22', question: 'Is SQL case-sensitive for keywords?', options: ['Yes', 'No (usually)', 'Depends', 'Always'], correctAnswer: 1 },
        { id: 'sql1-23', question: 'How to comment in SQL?', options: ['// comment', '-- comment', '# comment', 'All can work'], correctAnswer: 1 },
        { id: 'sql1-24', question: 'What ends an SQL statement?', options: ['.', ';', ':', ','], correctAnswer: 1 },
        { id: 'sql1-25', question: 'What is a database?', options: ['Single table', 'Collection of tables', 'Single row', 'Single column'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql1-c1',
          title: 'Basic SELECT',
          description: 'Write "SELECT * FROM users" (the query to select all from users table).',
          starterCode: '-- Write the SELECT query\n',
          expectedOutput: 'SELECT * FROM users',
          testCases: [{ expectedOutput: 'SELECT * FROM users' }],
        },
        {
          id: 'sql1-c2',
          title: 'SELECT with WHERE',
          description: 'Write "SELECT name FROM users WHERE age > 18" (query for adults).',
          starterCode: '-- Write the SELECT query with WHERE\n',
          expectedOutput: 'SELECT name FROM users WHERE age > 18',
          testCases: [{ expectedOutput: 'SELECT name FROM users WHERE age > 18' }],
        },
      ],
    },
    {
      level: 2,
      title: 'Data Manipulation',
      description: 'INSERT, UPDATE, DELETE statements',
      passingScore: 70,
      mcqs: [
        { id: 'sql2-1', question: 'Which command adds new rows?', options: ['ADD', 'INSERT', 'CREATE', 'NEW'], correctAnswer: 1 },
        { id: 'sql2-2', question: 'INSERT syntax?', options: ['INSERT table VALUES', 'INSERT INTO table VALUES', 'INSERT VALUES INTO table', 'ADD INTO table VALUES'], correctAnswer: 1 },
        { id: 'sql2-3', question: 'How to insert specific columns?', options: ['INSERT INTO table (cols) VALUES', 'INSERT table (cols) VALUES', 'INSERT (cols) INTO table', 'INSERT VALUES (cols)'], correctAnswer: 0 },
        { id: 'sql2-4', question: 'Which command modifies existing rows?', options: ['MODIFY', 'CHANGE', 'UPDATE', 'ALTER'], correctAnswer: 2 },
        { id: 'sql2-5', question: 'UPDATE syntax?', options: ['UPDATE table SET col = val', 'MODIFY table SET col = val', 'CHANGE table col = val', 'SET table col = val'], correctAnswer: 0 },
        { id: 'sql2-6', question: 'What happens if UPDATE has no WHERE?', options: ['Error', 'Updates all rows', 'Updates first row', 'Updates nothing'], correctAnswer: 1 },
        { id: 'sql2-7', question: 'Which command removes rows?', options: ['REMOVE', 'DROP', 'DELETE', 'ERASE'], correctAnswer: 2 },
        { id: 'sql2-8', question: 'DELETE syntax?', options: ['DELETE table WHERE', 'DELETE FROM table WHERE', 'REMOVE FROM table WHERE', 'DELETE table.rows WHERE'], correctAnswer: 1 },
        { id: 'sql2-9', question: 'What happens if DELETE has no WHERE?', options: ['Error', 'Deletes all rows', 'Deletes first row', 'Deletes nothing'], correctAnswer: 1 },
        { id: 'sql2-10', question: 'Difference between DELETE and TRUNCATE?', options: ['Same', 'TRUNCATE is faster, no WHERE', 'DELETE is faster', 'No difference'], correctAnswer: 1 },
        { id: 'sql2-11', question: 'Can TRUNCATE be rolled back?', options: ['Yes always', 'No (usually)', 'Depends on DB', 'Same as DELETE'], correctAnswer: 2 },
        { id: 'sql2-12', question: 'How to insert multiple rows?', options: ['Multiple INSERT statements', 'INSERT INTO table VALUES (), ()', 'Both work', 'Not possible'], correctAnswer: 2 },
        { id: 'sql2-13', question: 'What is INSERT INTO SELECT?', options: ['Insert from another table', 'Select and insert', 'Both', 'Neither'], correctAnswer: 2 },
        { id: 'sql2-14', question: 'How to update multiple columns?', options: ['Multiple UPDATE statements', 'UPDATE SET col1=val1, col2=val2', 'Both work', 'Not possible'], correctAnswer: 1 },
        { id: 'sql2-15', question: 'What is UPSERT?', options: ['Update or Insert', 'Upload', 'Upper case', 'User set'], correctAnswer: 0 },
        { id: 'sql2-16', question: 'How to handle UPSERT in MySQL?', options: ['INSERT IGNORE', 'ON DUPLICATE KEY UPDATE', 'REPLACE', 'All of above'], correctAnswer: 3 },
        { id: 'sql2-17', question: 'What is MERGE statement?', options: ['Combine tables', 'UPSERT operation', 'Join tables', 'Split table'], correctAnswer: 1 },
        { id: 'sql2-18', question: 'Can you UPDATE with JOIN?', options: ['No', 'Yes', 'Only in some DBs', 'Only with subquery'], correctAnswer: 1 },
        { id: 'sql2-19', question: 'Can you DELETE with JOIN?', options: ['No', 'Yes', 'Only in some DBs', 'Only with subquery'], correctAnswer: 1 },
        { id: 'sql2-20', question: 'What is OUTPUT clause?', options: ['Print results', 'Return affected rows', 'Export data', 'Log changes'], correctAnswer: 1 },
        { id: 'sql2-21', question: 'What is RETURNING clause?', options: ['Same as OUTPUT', 'Different from OUTPUT', 'PostgreSQL specific', 'Both A and C'], correctAnswer: 3 },
        { id: 'sql2-22', question: 'How to copy table structure?', options: ['CREATE TABLE new AS SELECT * FROM old WHERE 1=0', 'COPY TABLE', 'CLONE TABLE', 'DUPLICATE TABLE'], correctAnswer: 0 },
        { id: 'sql2-23', question: 'How to copy table with data?', options: ['CREATE TABLE new AS SELECT * FROM old', 'COPY TABLE old TO new', 'CLONE TABLE old new', 'DUPLICATE TABLE old'], correctAnswer: 0 },
        { id: 'sql2-24', question: 'What is safe update mode?', options: ['Prevents UPDATE/DELETE without WHERE', 'Encrypts data', 'Backs up data', 'Logs changes'], correctAnswer: 0 },
        { id: 'sql2-25', question: 'What is affected rows?', options: ['Selected rows', 'Changed rows count', 'Total rows', 'Deleted rows only'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql2-c1',
          title: 'INSERT Statement',
          description: 'Write "INSERT INTO users (name, age) VALUES (\'John\', 25)" to insert a user.',
          starterCode: '-- Write the INSERT query\n',
          expectedOutput: "INSERT INTO users (name, age) VALUES ('John', 25)",
          testCases: [{ expectedOutput: "INSERT INTO users (name, age) VALUES ('John', 25)" }],
        },
        {
          id: 'sql2-c2',
          title: 'UPDATE Statement',
          description: 'Write "UPDATE users SET age = 26 WHERE name = \'John\'" to update age.',
          starterCode: '-- Write the UPDATE query\n',
          expectedOutput: "UPDATE users SET age = 26 WHERE name = 'John'",
          testCases: [{ expectedOutput: "UPDATE users SET age = 26 WHERE name = 'John'" }],
        },
      ],
    },
    {
      level: 3,
      title: 'Table Operations',
      description: 'CREATE, ALTER, DROP tables',
      passingScore: 70,
      mcqs: [
        { id: 'sql3-1', question: 'Which command creates a table?', options: ['MAKE TABLE', 'NEW TABLE', 'CREATE TABLE', 'ADD TABLE'], correctAnswer: 2 },
        { id: 'sql3-2', question: 'CREATE TABLE syntax?', options: ['CREATE TABLE name (columns)', 'CREATE name TABLE (columns)', 'TABLE CREATE name (columns)', 'NEW TABLE name (columns)'], correctAnswer: 0 },
        { id: 'sql3-3', question: 'What is PRIMARY KEY?', options: ['Any column', 'Unique identifier', 'Foreign reference', 'Index'], correctAnswer: 1 },
        { id: 'sql3-4', question: 'Can PRIMARY KEY be NULL?', options: ['Yes', 'No', 'Depends', 'Sometimes'], correctAnswer: 1 },
        { id: 'sql3-5', question: 'What is FOREIGN KEY?', options: ['Primary key', 'Reference to another table', 'Unique key', 'Index'], correctAnswer: 1 },
        { id: 'sql3-6', question: 'What is NOT NULL constraint?', options: ['Allows null', 'Prevents null', 'Default null', 'Removes null'], correctAnswer: 1 },
        { id: 'sql3-7', question: 'What is UNIQUE constraint?', options: ['Allows duplicates', 'Prevents duplicates', 'Primary key', 'Foreign key'], correctAnswer: 1 },
        { id: 'sql3-8', question: 'What is DEFAULT constraint?', options: ['Required value', 'Default value if not provided', 'Null value', 'First value'], correctAnswer: 1 },
        { id: 'sql3-9', question: 'What is CHECK constraint?', options: ['Validates data', 'Checks null', 'Checks unique', 'Checks foreign key'], correctAnswer: 0 },
        { id: 'sql3-10', question: 'Which command modifies table structure?', options: ['MODIFY TABLE', 'CHANGE TABLE', 'ALTER TABLE', 'UPDATE TABLE'], correctAnswer: 2 },
        { id: 'sql3-11', question: 'How to add a column?', options: ['ALTER TABLE ADD COLUMN', 'ADD COLUMN TO TABLE', 'INSERT COLUMN INTO TABLE', 'CREATE COLUMN IN TABLE'], correctAnswer: 0 },
        { id: 'sql3-12', question: 'How to drop a column?', options: ['ALTER TABLE DROP COLUMN', 'DELETE COLUMN FROM TABLE', 'REMOVE COLUMN FROM TABLE', 'DROP COLUMN FROM TABLE'], correctAnswer: 0 },
        { id: 'sql3-13', question: 'How to rename a column?', options: ['ALTER TABLE RENAME COLUMN', 'RENAME COLUMN IN TABLE', 'CHANGE COLUMN NAME', 'Varies by DB'], correctAnswer: 3 },
        { id: 'sql3-14', question: 'How to change column type?', options: ['ALTER TABLE MODIFY COLUMN', 'ALTER TABLE ALTER COLUMN', 'Both (varies by DB)', 'CHANGE COLUMN TYPE'], correctAnswer: 2 },
        { id: 'sql3-15', question: 'Which command removes a table?', options: ['DELETE TABLE', 'REMOVE TABLE', 'DROP TABLE', 'DESTROY TABLE'], correctAnswer: 2 },
        { id: 'sql3-16', question: 'What is DROP TABLE IF EXISTS?', options: ['Error if not exists', 'No error if not exists', 'Creates if not exists', 'Drops all tables'], correctAnswer: 1 },
        { id: 'sql3-17', question: 'What is AUTO_INCREMENT?', options: ['Manual increment', 'Automatic unique number', 'Random number', 'Sequence'], correctAnswer: 1 },
        { id: 'sql3-18', question: 'What is IDENTITY in SQL Server?', options: ['User identity', 'Same as AUTO_INCREMENT', 'Table identity', 'Column identity'], correctAnswer: 1 },
        { id: 'sql3-19', question: 'What is SERIAL in PostgreSQL?', options: ['Serial number', 'Same as AUTO_INCREMENT', 'Sequence', 'Both B and C'], correctAnswer: 3 },
        { id: 'sql3-20', question: 'How to add PRIMARY KEY to existing table?', options: ['ALTER TABLE ADD PRIMARY KEY', 'ADD PRIMARY KEY TO TABLE', 'CREATE PRIMARY KEY ON TABLE', 'SET PRIMARY KEY'], correctAnswer: 0 },
        { id: 'sql3-21', question: 'How to add FOREIGN KEY to existing table?', options: ['ALTER TABLE ADD FOREIGN KEY', 'ADD FOREIGN KEY TO TABLE', 'CREATE FOREIGN KEY ON TABLE', 'SET FOREIGN KEY'], correctAnswer: 0 },
        { id: 'sql3-22', question: 'What is ON DELETE CASCADE?', options: ['Prevents delete', 'Deletes related rows', 'Sets null', 'Does nothing'], correctAnswer: 1 },
        { id: 'sql3-23', question: 'What is ON DELETE SET NULL?', options: ['Prevents delete', 'Deletes related rows', 'Sets foreign key to null', 'Does nothing'], correctAnswer: 2 },
        { id: 'sql3-24', question: 'What is composite primary key?', options: ['Single column', 'Multiple columns', 'Foreign key', 'Unique key'], correctAnswer: 1 },
        { id: 'sql3-25', question: 'What is temporary table?', options: ['Permanent table', 'Session-scoped table', 'View', 'Index'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql3-c1',
          title: 'CREATE TABLE',
          description: 'Write "CREATE TABLE users (id INT PRIMARY KEY, name VARCHAR(50))" to create a table.',
          starterCode: '-- Write the CREATE TABLE query\n',
          expectedOutput: 'CREATE TABLE users (id INT PRIMARY KEY, name VARCHAR(50))',
          testCases: [{ expectedOutput: 'CREATE TABLE users (id INT PRIMARY KEY, name VARCHAR(50))' }],
        },
        {
          id: 'sql3-c2',
          title: 'ALTER TABLE',
          description: 'Write "ALTER TABLE users ADD email VARCHAR(100)" to add a column.',
          starterCode: '-- Write the ALTER TABLE query\n',
          expectedOutput: 'ALTER TABLE users ADD email VARCHAR(100)',
          testCases: [{ expectedOutput: 'ALTER TABLE users ADD email VARCHAR(100)' }],
        },
      ],
    },
    {
      level: 4,
      title: 'Aggregate Functions',
      description: 'COUNT, SUM, AVG, MIN, MAX, GROUP BY',
      passingScore: 70,
      mcqs: [
        { id: 'sql4-1', question: 'What does COUNT() do?', options: ['Sum values', 'Count rows', 'Average values', 'Find maximum'], correctAnswer: 1 },
        { id: 'sql4-2', question: 'What does COUNT(*) count?', options: ['Non-null values', 'All rows', 'Distinct values', 'Null values'], correctAnswer: 1 },
        { id: 'sql4-3', question: 'What does COUNT(column) count?', options: ['All rows', 'Non-null values in column', 'Null values', 'Distinct values'], correctAnswer: 1 },
        { id: 'sql4-4', question: 'What does SUM() do?', options: ['Count rows', 'Add values', 'Average values', 'Find maximum'], correctAnswer: 1 },
        { id: 'sql4-5', question: 'What does AVG() do?', options: ['Sum values', 'Count rows', 'Calculate average', 'Find median'], correctAnswer: 2 },
        { id: 'sql4-6', question: 'What does MIN() do?', options: ['Find minimum', 'Find maximum', 'Count rows', 'Sum values'], correctAnswer: 0 },
        { id: 'sql4-7', question: 'What does MAX() do?', options: ['Find minimum', 'Find maximum', 'Count rows', 'Sum values'], correctAnswer: 1 },
        { id: 'sql4-8', question: 'What is GROUP BY?', options: ['Sort rows', 'Group rows for aggregation', 'Filter rows', 'Join tables'], correctAnswer: 1 },
        { id: 'sql4-9', question: 'Where does GROUP BY go?', options: ['Before WHERE', 'After WHERE', 'Before FROM', 'After ORDER BY'], correctAnswer: 1 },
        { id: 'sql4-10', question: 'What is HAVING?', options: ['Filter before grouping', 'Filter after grouping', 'Same as WHERE', 'Sort groups'], correctAnswer: 1 },
        { id: 'sql4-11', question: 'WHERE vs HAVING?', options: ['Same', 'WHERE before GROUP BY, HAVING after', 'HAVING before GROUP BY', 'No difference'], correctAnswer: 1 },
        { id: 'sql4-12', question: 'Can you use aggregate without GROUP BY?', options: ['No', 'Yes, aggregates entire table', 'Only COUNT', 'Only SUM'], correctAnswer: 1 },
        { id: 'sql4-13', question: 'What is COUNT(DISTINCT column)?', options: ['Count all', 'Count unique values', 'Count nulls', 'Count duplicates'], correctAnswer: 1 },
        { id: 'sql4-14', question: 'Can SELECT have non-aggregated columns with GROUP BY?', options: ['Yes, any column', 'Only grouped columns', 'No columns', 'Only aggregated'], correctAnswer: 1 },
        { id: 'sql4-15', question: 'What is ROLLUP?', options: ['Sum values', 'Hierarchical grouping', 'Join tables', 'Sort rows'], correctAnswer: 1 },
        { id: 'sql4-16', question: 'What is CUBE?', options: ['3D data', 'All grouping combinations', 'Join tables', 'Sort rows'], correctAnswer: 1 },
        { id: 'sql4-17', question: 'What is GROUPING SETS?', options: ['Specific grouping combinations', 'All combinations', 'No grouping', 'Single group'], correctAnswer: 0 },
        { id: 'sql4-18', question: 'How to handle NULL in aggregates?', options: ['Included', 'Excluded (except COUNT(*))', 'Error', 'Converted to 0'], correctAnswer: 1 },
        { id: 'sql4-19', question: 'What is STRING_AGG/GROUP_CONCAT?', options: ['Sum strings', 'Concatenate grouped strings', 'Count strings', 'Split strings'], correctAnswer: 1 },
        { id: 'sql4-20', question: 'Can you nest aggregate functions?', options: ['Yes', 'No (usually)', 'Only two levels', 'Only with subquery'], correctAnswer: 1 },
        { id: 'sql4-21', question: 'What is FILTER clause?', options: ['WHERE for aggregates', 'Conditional aggregation', 'Both', 'Neither'], correctAnswer: 2 },
        { id: 'sql4-22', question: 'How to get percentage?', options: ['COUNT(*) * 100 / total', 'Subquery or window function', 'Both work', 'Not possible'], correctAnswer: 2 },
        { id: 'sql4-23', question: 'What is FIRST_VALUE/LAST_VALUE?', options: ['Aggregate functions', 'Window functions', 'Scalar functions', 'Table functions'], correctAnswer: 1 },
        { id: 'sql4-24', question: 'Can GROUP BY use column alias?', options: ['Yes', 'No (in standard SQL)', 'Depends on DB', 'Both B and C'], correctAnswer: 3 },
        { id: 'sql4-25', question: 'Can GROUP BY use column position?', options: ['Yes', 'No', 'Depends on DB', 'Only in ORDER BY'], correctAnswer: 2 },
      ],
      codingChallenges: [
        {
          id: 'sql4-c1',
          title: 'COUNT Query',
          description: 'Write "SELECT COUNT(*) FROM users" to count all users.',
          starterCode: '-- Write the COUNT query\n',
          expectedOutput: 'SELECT COUNT(*) FROM users',
          testCases: [{ expectedOutput: 'SELECT COUNT(*) FROM users' }],
        },
        {
          id: 'sql4-c2',
          title: 'GROUP BY Query',
          description: 'Write "SELECT department, AVG(salary) FROM employees GROUP BY department" to get average salary by department.',
          starterCode: '-- Write the GROUP BY query\n',
          expectedOutput: 'SELECT department, AVG(salary) FROM employees GROUP BY department',
          testCases: [{ expectedOutput: 'SELECT department, AVG(salary) FROM employees GROUP BY department' }],
        },
      ],
    },
    {
      level: 5,
      title: 'JOINs',
      description: 'INNER, LEFT, RIGHT, FULL, CROSS JOINs',
      passingScore: 70,
      mcqs: [
        { id: 'sql5-1', question: 'What is a JOIN?', options: ['Combine columns', 'Combine rows from tables', 'Split table', 'Delete rows'], correctAnswer: 1 },
        { id: 'sql5-2', question: 'What is INNER JOIN?', options: ['All rows from both', 'Matching rows only', 'All from left', 'All from right'], correctAnswer: 1 },
        { id: 'sql5-3', question: 'What is LEFT JOIN?', options: ['Matching only', 'All from left, matching from right', 'All from right', 'All from both'], correctAnswer: 1 },
        { id: 'sql5-4', question: 'What is RIGHT JOIN?', options: ['Matching only', 'All from left', 'All from right, matching from left', 'All from both'], correctAnswer: 2 },
        { id: 'sql5-5', question: 'What is FULL OUTER JOIN?', options: ['Matching only', 'All from left', 'All from right', 'All from both'], correctAnswer: 3 },
        { id: 'sql5-6', question: 'What is CROSS JOIN?', options: ['Matching rows', 'Cartesian product', 'Left rows only', 'Right rows only'], correctAnswer: 1 },
        { id: 'sql5-7', question: 'What is self join?', options: ['Join with itself', 'Join two tables', 'No join', 'Cross join'], correctAnswer: 0 },
        { id: 'sql5-8', question: 'What is natural join?', options: ['Manual join', 'Auto join on same column names', 'Cross join', 'Self join'], correctAnswer: 1 },
        { id: 'sql5-9', question: 'JOIN syntax?', options: ['FROM t1 JOIN t2 ON condition', 'FROM t1, t2 WHERE condition', 'Both work', 'Neither'], correctAnswer: 2 },
        { id: 'sql5-10', question: 'What is ON clause?', options: ['Filter rows', 'Join condition', 'Group rows', 'Sort rows'], correctAnswer: 1 },
        { id: 'sql5-11', question: 'Can you JOIN more than 2 tables?', options: ['No', 'Yes', 'Only 3', 'Only with subquery'], correctAnswer: 1 },
        { id: 'sql5-12', question: 'What is USING clause?', options: ['Same as ON', 'Shorthand when column names match', 'Filter clause', 'Group clause'], correctAnswer: 1 },
        { id: 'sql5-13', question: 'LEFT JOIN vs LEFT OUTER JOIN?', options: ['Different', 'Same', 'LEFT is inner', 'OUTER is inner'], correctAnswer: 1 },
        { id: 'sql5-14', question: 'What happens with NULL in JOIN?', options: ['Matches NULL', 'NULL never matches', 'Error', 'Ignored'], correctAnswer: 1 },
        { id: 'sql5-15', question: 'How to find non-matching rows?', options: ['INNER JOIN', 'LEFT JOIN WHERE right IS NULL', 'RIGHT JOIN', 'CROSS JOIN'], correctAnswer: 1 },
        { id: 'sql5-16', question: 'What is anti-join?', options: ['Matching rows', 'Non-matching rows', 'All rows', 'No rows'], correctAnswer: 1 },
        { id: 'sql5-17', question: 'What is semi-join?', options: ['Half the rows', 'Exists in other table', 'Not exists', 'All rows'], correctAnswer: 1 },
        { id: 'sql5-18', question: 'Can WHERE filter after JOIN?', options: ['No', 'Yes', 'Only INNER JOIN', 'Only OUTER JOIN'], correctAnswer: 1 },
        { id: 'sql5-19', question: 'ON vs WHERE in LEFT JOIN?', options: ['Same', 'ON filters before join, WHERE after', 'WHERE filters before', 'No difference'], correctAnswer: 1 },
        { id: 'sql5-20', question: 'What is equi-join?', options: ['Join with =', 'Join with <>', 'Join with LIKE', 'Any join'], correctAnswer: 0 },
        { id: 'sql5-21', question: 'What is non-equi join?', options: ['Join with =', 'Join with other operators', 'No join', 'Cross join'], correctAnswer: 1 },
        { id: 'sql5-22', question: 'How many rows from CROSS JOIN?', options: ['Sum of rows', 'Product of rows', 'Minimum rows', 'Maximum rows'], correctAnswer: 1 },
        { id: 'sql5-23', question: 'What is hash join?', options: ['Join algorithm', 'Join type', 'Join syntax', 'Join result'], correctAnswer: 0 },
        { id: 'sql5-24', question: 'What is nested loop join?', options: ['Join algorithm', 'Join type', 'Join syntax', 'Join result'], correctAnswer: 0 },
        { id: 'sql5-25', question: 'What is merge join?', options: ['Join algorithm', 'Join type', 'Join syntax', 'Join result'], correctAnswer: 0 },
      ],
      codingChallenges: [
        {
          id: 'sql5-c1',
          title: 'INNER JOIN',
          description: 'Write "SELECT * FROM orders INNER JOIN customers ON orders.customer_id = customers.id" for an inner join.',
          starterCode: '-- Write the INNER JOIN query\n',
          expectedOutput: 'SELECT * FROM orders INNER JOIN customers ON orders.customer_id = customers.id',
          testCases: [{ expectedOutput: 'SELECT * FROM orders INNER JOIN customers ON orders.customer_id = customers.id' }],
        },
        {
          id: 'sql5-c2',
          title: 'LEFT JOIN',
          description: 'Write "SELECT * FROM customers LEFT JOIN orders ON customers.id = orders.customer_id" for a left join.',
          starterCode: '-- Write the LEFT JOIN query\n',
          expectedOutput: 'SELECT * FROM customers LEFT JOIN orders ON customers.id = orders.customer_id',
          testCases: [{ expectedOutput: 'SELECT * FROM customers LEFT JOIN orders ON customers.id = orders.customer_id' }],
        },
      ],
    },
    {
      level: 6,
      title: 'Subqueries',
      description: 'Nested queries and correlated subqueries',
      passingScore: 70,
      mcqs: [
        { id: 'sql6-1', question: 'What is a subquery?', options: ['Main query', 'Query inside another query', 'Join', 'View'], correctAnswer: 1 },
        { id: 'sql6-2', question: 'Where can subqueries be used?', options: ['SELECT', 'FROM', 'WHERE', 'All of above'], correctAnswer: 3 },
        { id: 'sql6-3', question: 'What is scalar subquery?', options: ['Returns table', 'Returns single value', 'Returns column', 'Returns row'], correctAnswer: 1 },
        { id: 'sql6-4', question: 'What is correlated subquery?', options: ['Independent of outer', 'References outer query', 'Returns multiple rows', 'Same as join'], correctAnswer: 1 },
        { id: 'sql6-5', question: 'When is correlated subquery executed?', options: ['Once', 'For each outer row', 'Never', 'At end'], correctAnswer: 1 },
        { id: 'sql6-6', question: 'What is EXISTS?', options: ['Checks value', 'Checks if subquery returns rows', 'Checks null', 'Checks count'], correctAnswer: 1 },
        { id: 'sql6-7', question: 'What is NOT EXISTS?', options: ['Opposite of EXISTS', 'Same as EXISTS', 'Checks null', 'Checks value'], correctAnswer: 0 },
        { id: 'sql6-8', question: 'What is IN with subquery?', options: ['Checks membership', 'Checks existence', 'Checks count', 'Checks null'], correctAnswer: 0 },
        { id: 'sql6-9', question: 'What is ANY/SOME?', options: ['All values match', 'At least one matches', 'No match', 'Exact match'], correctAnswer: 1 },
        { id: 'sql6-10', question: 'What is ALL?', options: ['At least one', 'All values must match', 'No match', 'Some match'], correctAnswer: 1 },
        { id: 'sql6-11', question: 'Subquery in FROM clause is called?', options: ['Inline view', 'Derived table', 'Both', 'Neither'], correctAnswer: 2 },
        { id: 'sql6-12', question: 'Must derived table have alias?', options: ['No', 'Yes (usually)', 'Depends', 'Never'], correctAnswer: 1 },
        { id: 'sql6-13', question: 'Can subquery return multiple columns?', options: ['No', 'Yes', 'Only in FROM', 'Only in WHERE'], correctAnswer: 1 },
        { id: 'sql6-14', question: 'What is nested subquery?', options: ['One level', 'Subquery in subquery', 'Join', 'View'], correctAnswer: 1 },
        { id: 'sql6-15', question: 'How deep can subqueries nest?', options: ['2 levels', '3 levels', 'No limit (DB dependent)', '10 levels'], correctAnswer: 2 },
        { id: 'sql6-16', question: 'Subquery vs JOIN performance?', options: ['Subquery faster', 'JOIN faster', 'Depends on query', 'Same'], correctAnswer: 2 },
        { id: 'sql6-17', question: 'Can UPDATE use subquery?', options: ['No', 'Yes', 'Only in SET', 'Only in WHERE'], correctAnswer: 1 },
        { id: 'sql6-18', question: 'Can DELETE use subquery?', options: ['No', 'Yes', 'Only in WHERE', 'Only in FROM'], correctAnswer: 1 },
        { id: 'sql6-19', question: 'Can INSERT use subquery?', options: ['No', 'Yes (INSERT INTO SELECT)', 'Only VALUES', 'Only single row'], correctAnswer: 1 },
        { id: 'sql6-20', question: 'What is CTE?', options: ['Common Table Expression', 'Complex Table Expression', 'Cached Table Expression', 'Combined Table Expression'], correctAnswer: 0 },
        { id: 'sql6-21', question: 'CTE syntax?', options: ['WITH name AS (query)', 'CTE name AS (query)', 'CREATE CTE name', 'DEFINE name AS (query)'], correctAnswer: 0 },
        { id: 'sql6-22', question: 'Can CTE be recursive?', options: ['No', 'Yes', 'Only in some DBs', 'Only non-recursive'], correctAnswer: 1 },
        { id: 'sql6-23', question: 'CTE vs subquery?', options: ['Same', 'CTE more readable', 'Subquery more readable', 'CTE is faster'], correctAnswer: 1 },
        { id: 'sql6-24', question: 'Can CTE be referenced multiple times?', options: ['No', 'Yes', 'Only once', 'Only twice'], correctAnswer: 1 },
        { id: 'sql6-25', question: 'What is lateral join?', options: ['Regular join', 'Correlated subquery in FROM', 'Cross join', 'Self join'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql6-c1',
          title: 'Subquery in WHERE',
          description: 'Write "SELECT * FROM employees WHERE salary > (SELECT AVG(salary) FROM employees)" for above average salaries.',
          starterCode: '-- Write the subquery\n',
          expectedOutput: 'SELECT * FROM employees WHERE salary > (SELECT AVG(salary) FROM employees)',
          testCases: [{ expectedOutput: 'SELECT * FROM employees WHERE salary > (SELECT AVG(salary) FROM employees)' }],
        },
        {
          id: 'sql6-c2',
          title: 'EXISTS Subquery',
          description: 'Write "SELECT * FROM customers WHERE EXISTS (SELECT 1 FROM orders WHERE orders.customer_id = customers.id)" for customers with orders.',
          starterCode: '-- Write the EXISTS query\n',
          expectedOutput: 'SELECT * FROM customers WHERE EXISTS (SELECT 1 FROM orders WHERE orders.customer_id = customers.id)',
          testCases: [{ expectedOutput: 'SELECT * FROM customers WHERE EXISTS (SELECT 1 FROM orders WHERE orders.customer_id = customers.id)' }],
        },
      ],
    },
    {
      level: 7,
      title: 'Window Functions',
      description: 'ROW_NUMBER, RANK, LAG, LEAD, partitions',
      passingScore: 70,
      mcqs: [
        { id: 'sql7-1', question: 'What are window functions?', options: ['Aggregate entire table', 'Calculations across related rows', 'Create windows', 'GUI functions'], correctAnswer: 1 },
        { id: 'sql7-2', question: 'Window function syntax?', options: ['function() OVER ()', 'function() WINDOW ()', 'WINDOW function()', 'OVER function()'], correctAnswer: 0 },
        { id: 'sql7-3', question: 'What is PARTITION BY?', options: ['Divides result into groups', 'Sorts results', 'Filters results', 'Joins tables'], correctAnswer: 0 },
        { id: 'sql7-4', question: 'What is ORDER BY in window?', options: ['Sorts final result', 'Sorts within partition', 'Groups rows', 'Filters rows'], correctAnswer: 1 },
        { id: 'sql7-5', question: 'What does ROW_NUMBER() do?', options: ['Counts rows', 'Unique number per row', 'Ranks with gaps', 'Ranks without gaps'], correctAnswer: 1 },
        { id: 'sql7-6', question: 'What does RANK() do?', options: ['Unique numbers', 'Ranks with gaps for ties', 'Ranks without gaps', 'Counts rows'], correctAnswer: 1 },
        { id: 'sql7-7', question: 'What does DENSE_RANK() do?', options: ['Unique numbers', 'Ranks with gaps', 'Ranks without gaps for ties', 'Counts rows'], correctAnswer: 2 },
        { id: 'sql7-8', question: 'What does NTILE(n) do?', options: ['Divides into n groups', 'Returns nth row', 'Counts to n', 'Ranks to n'], correctAnswer: 0 },
        { id: 'sql7-9', question: 'What does LAG() do?', options: ['Next row value', 'Previous row value', 'First row value', 'Last row value'], correctAnswer: 1 },
        { id: 'sql7-10', question: 'What does LEAD() do?', options: ['Previous row value', 'Next row value', 'First row value', 'Last row value'], correctAnswer: 1 },
        { id: 'sql7-11', question: 'What does FIRST_VALUE() do?', options: ['Last value in partition', 'First value in partition', 'Any value', 'Null value'], correctAnswer: 1 },
        { id: 'sql7-12', question: 'What does LAST_VALUE() do?', options: ['First value', 'Last value in partition', 'Any value', 'Null value'], correctAnswer: 1 },
        { id: 'sql7-13', question: 'What is frame clause?', options: ['Defines window boundaries', 'Creates frame', 'Sorts frame', 'Filters frame'], correctAnswer: 0 },
        { id: 'sql7-14', question: 'What is ROWS BETWEEN?', options: ['Physical rows', 'Logical rows', 'All rows', 'No rows'], correctAnswer: 0 },
        { id: 'sql7-15', question: 'What is RANGE BETWEEN?', options: ['Physical rows', 'Logical value range', 'All rows', 'No rows'], correctAnswer: 1 },
        { id: 'sql7-16', question: 'What is UNBOUNDED PRECEDING?', options: ['Current row', 'First row of partition', 'Last row', 'Next row'], correctAnswer: 1 },
        { id: 'sql7-17', question: 'What is CURRENT ROW?', options: ['First row', 'Current processing row', 'Last row', 'Next row'], correctAnswer: 1 },
        { id: 'sql7-18', question: 'What is UNBOUNDED FOLLOWING?', options: ['Current row', 'First row', 'Last row of partition', 'Previous row'], correctAnswer: 2 },
        { id: 'sql7-19', question: 'Can window functions be in WHERE?', options: ['Yes', 'No', 'Only with subquery', 'Only in HAVING'], correctAnswer: 1 },
        { id: 'sql7-20', question: 'Can you use multiple window functions?', options: ['No', 'Yes', 'Only two', 'Only same type'], correctAnswer: 1 },
        { id: 'sql7-21', question: 'What is WINDOW clause?', options: ['Defines reusable window', 'Creates window', 'Deletes window', 'Modifies window'], correctAnswer: 0 },
        { id: 'sql7-22', question: 'Running total using window?', options: ['SUM() OVER (ORDER BY)', 'COUNT() OVER ()', 'AVG() OVER ()', 'MAX() OVER ()'], correctAnswer: 0 },
        { id: 'sql7-23', question: 'Moving average using window?', options: ['AVG() OVER (ROWS BETWEEN n PRECEDING AND CURRENT ROW)', 'SUM() OVER ()', 'COUNT() OVER ()', 'MAX() OVER ()'], correctAnswer: 0 },
        { id: 'sql7-24', question: 'Percent of total using window?', options: ['value / SUM() OVER () * 100', 'COUNT() OVER ()', 'AVG() OVER ()', 'MAX() OVER ()'], correctAnswer: 0 },
        { id: 'sql7-25', question: 'What is CUME_DIST()?', options: ['Cumulative distribution', 'Distance', 'Count', 'Average'], correctAnswer: 0 },
      ],
      codingChallenges: [
        {
          id: 'sql7-c1',
          title: 'ROW_NUMBER',
          description: 'Write "SELECT name, ROW_NUMBER() OVER (ORDER BY salary DESC) as rank FROM employees" to rank by salary.',
          starterCode: '-- Write the window function query\n',
          expectedOutput: 'SELECT name, ROW_NUMBER() OVER (ORDER BY salary DESC) as rank FROM employees',
          testCases: [{ expectedOutput: 'SELECT name, ROW_NUMBER() OVER (ORDER BY salary DESC) as rank FROM employees' }],
        },
        {
          id: 'sql7-c2',
          title: 'Running Total',
          description: 'Write "SELECT date, amount, SUM(amount) OVER (ORDER BY date) as running_total FROM sales" for running total.',
          starterCode: '-- Write the running total query\n',
          expectedOutput: 'SELECT date, amount, SUM(amount) OVER (ORDER BY date) as running_total FROM sales',
          testCases: [{ expectedOutput: 'SELECT date, amount, SUM(amount) OVER (ORDER BY date) as running_total FROM sales' }],
        },
      ],
    },
    {
      level: 8,
      title: 'Indexes and Performance',
      description: 'Creating indexes and query optimization',
      passingScore: 70,
      mcqs: [
        { id: 'sql8-1', question: 'What is an index?', options: ['Table copy', 'Data structure for fast lookup', 'Primary key', 'Foreign key'], correctAnswer: 1 },
        { id: 'sql8-2', question: 'Why use indexes?', options: ['Slower queries', 'Faster queries', 'More storage', 'Less storage'], correctAnswer: 1 },
        { id: 'sql8-3', question: 'Downside of indexes?', options: ['Slower reads', 'Slower writes', 'No downside', 'Faster writes'], correctAnswer: 1 },
        { id: 'sql8-4', question: 'How to create index?', options: ['CREATE INDEX name ON table(column)', 'ADD INDEX name ON table', 'INDEX CREATE name', 'NEW INDEX name'], correctAnswer: 0 },
        { id: 'sql8-5', question: 'What is clustered index?', options: ['Separate from data', 'Data sorted by index', 'Multiple per table', 'No data ordering'], correctAnswer: 1 },
        { id: 'sql8-6', question: 'How many clustered indexes per table?', options: ['Unlimited', 'One', 'Two', 'None'], correctAnswer: 1 },
        { id: 'sql8-7', question: 'What is non-clustered index?', options: ['Data sorted by index', 'Separate from data', 'Only one per table', 'Same as clustered'], correctAnswer: 1 },
        { id: 'sql8-8', question: 'What is composite index?', options: ['Single column', 'Multiple columns', 'All columns', 'No columns'], correctAnswer: 1 },
        { id: 'sql8-9', question: 'Column order matters in composite index?', options: ['No', 'Yes', 'Sometimes', 'Never'], correctAnswer: 1 },
        { id: 'sql8-10', question: 'What is covering index?', options: ['Covers table', 'Contains all query columns', 'Covers primary key', 'Covers foreign key'], correctAnswer: 1 },
        { id: 'sql8-11', question: 'What is EXPLAIN/EXPLAIN PLAN?', options: ['Creates plan', 'Shows query execution plan', 'Executes query', 'Optimizes query'], correctAnswer: 1 },
        { id: 'sql8-12', question: 'What is table scan?', options: ['Fast lookup', 'Reads entire table', 'Index lookup', 'Partial read'], correctAnswer: 1 },
        { id: 'sql8-13', question: 'What is index seek?', options: ['Reads entire index', 'Direct lookup in index', 'Table scan', 'Full scan'], correctAnswer: 1 },
        { id: 'sql8-14', question: 'What is index scan?', options: ['Direct lookup', 'Reads entire index', 'Table scan', 'Partial read'], correctAnswer: 1 },
        { id: 'sql8-15', question: 'When is index not used?', options: ['Exact match', 'Range query', 'Function on column', 'Primary key'], correctAnswer: 2 },
        { id: 'sql8-16', question: 'What is selectivity?', options: ['Number of rows', 'Uniqueness of values', 'Index size', 'Table size'], correctAnswer: 1 },
        { id: 'sql8-17', question: 'High selectivity means?', options: ['Many duplicates', 'Few duplicates', 'No index', 'Slow query'], correctAnswer: 1 },
        { id: 'sql8-18', question: 'What is cardinality?', options: ['Number of unique values', 'Number of rows', 'Index size', 'Table size'], correctAnswer: 0 },
        { id: 'sql8-19', question: 'What is query optimizer?', options: ['Creates queries', 'Chooses best execution plan', 'Deletes queries', 'Stores queries'], correctAnswer: 1 },
        { id: 'sql8-20', question: 'What is query hint?', options: ['Suggestion to optimizer', 'Query comment', 'Query error', 'Query result'], correctAnswer: 0 },
        { id: 'sql8-21', question: 'What is index fragmentation?', options: ['Index creation', 'Index disorder over time', 'Index deletion', 'Index optimization'], correctAnswer: 1 },
        { id: 'sql8-22', question: 'How to fix fragmentation?', options: ['REBUILD INDEX', 'REORGANIZE INDEX', 'Both', 'Neither'], correctAnswer: 2 },
        { id: 'sql8-23', question: 'What is partial index?', options: ['Index on all rows', 'Index on subset of rows', 'Half index', 'No index'], correctAnswer: 1 },
        { id: 'sql8-24', question: 'What is unique index?', options: ['Allows duplicates', 'Prevents duplicates', 'Primary key only', 'Foreign key only'], correctAnswer: 1 },
        { id: 'sql8-25', question: 'What is full-text index?', options: ['Regular index', 'Index for text search', 'Index on all columns', 'No index'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql8-c1',
          title: 'CREATE INDEX',
          description: 'Write "CREATE INDEX idx_email ON users(email)" to create an index on email.',
          starterCode: '-- Write the CREATE INDEX query\n',
          expectedOutput: 'CREATE INDEX idx_email ON users(email)',
          testCases: [{ expectedOutput: 'CREATE INDEX idx_email ON users(email)' }],
        },
        {
          id: 'sql8-c2',
          title: 'Composite Index',
          description: 'Write "CREATE INDEX idx_name_date ON orders(customer_name, order_date)" for composite index.',
          starterCode: '-- Write the composite index query\n',
          expectedOutput: 'CREATE INDEX idx_name_date ON orders(customer_name, order_date)',
          testCases: [{ expectedOutput: 'CREATE INDEX idx_name_date ON orders(customer_name, order_date)' }],
        },
      ],
    },
    {
      level: 9,
      title: 'Transactions',
      description: 'ACID properties, COMMIT, ROLLBACK',
      passingScore: 70,
      mcqs: [
        { id: 'sql9-1', question: 'What is a transaction?', options: ['Single query', 'Unit of work', 'Table', 'Index'], correctAnswer: 1 },
        { id: 'sql9-2', question: 'What does ACID stand for?', options: ['Atomicity, Consistency, Isolation, Durability', 'Automatic, Consistent, Isolated, Durable', 'Atomic, Complete, Isolated, Data', 'All Correct In Database'], correctAnswer: 0 },
        { id: 'sql9-3', question: 'What is Atomicity?', options: ['Partial completion', 'All or nothing', 'Consistent data', 'Isolated execution'], correctAnswer: 1 },
        { id: 'sql9-4', question: 'What is Consistency?', options: ['All or nothing', 'Valid state to valid state', 'Isolated execution', 'Permanent changes'], correctAnswer: 1 },
        { id: 'sql9-5', question: 'What is Isolation?', options: ['All or nothing', 'Valid states', 'Transactions don\'t interfere', 'Permanent changes'], correctAnswer: 2 },
        { id: 'sql9-6', question: 'What is Durability?', options: ['All or nothing', 'Valid states', 'Isolation', 'Changes survive failures'], correctAnswer: 3 },
        { id: 'sql9-7', question: 'How to start transaction?', options: ['START TRANSACTION', 'BEGIN', 'BEGIN TRANSACTION', 'All of above'], correctAnswer: 3 },
        { id: 'sql9-8', question: 'How to save transaction?', options: ['SAVE', 'COMMIT', 'END', 'FINISH'], correctAnswer: 1 },
        { id: 'sql9-9', question: 'How to undo transaction?', options: ['UNDO', 'ROLLBACK', 'CANCEL', 'REVERT'], correctAnswer: 1 },
        { id: 'sql9-10', question: 'What is SAVEPOINT?', options: ['End point', 'Partial rollback point', 'Start point', 'Commit point'], correctAnswer: 1 },
        { id: 'sql9-11', question: 'How to rollback to savepoint?', options: ['ROLLBACK TO savepoint', 'UNDO TO savepoint', 'REVERT TO savepoint', 'BACK TO savepoint'], correctAnswer: 0 },
        { id: 'sql9-12', question: 'What is auto-commit?', options: ['Manual commit', 'Each statement is transaction', 'No commit', 'Delayed commit'], correctAnswer: 1 },
        { id: 'sql9-13', question: 'What is isolation level?', options: ['Transaction speed', 'How transactions see each other', 'Transaction size', 'Transaction count'], correctAnswer: 1 },
        { id: 'sql9-14', question: 'What is READ UNCOMMITTED?', options: ['Highest isolation', 'Lowest isolation', 'Medium isolation', 'No isolation'], correctAnswer: 1 },
        { id: 'sql9-15', question: 'What is dirty read?', options: ['Reading committed data', 'Reading uncommitted data', 'Reading old data', 'Reading no data'], correctAnswer: 1 },
        { id: 'sql9-16', question: 'What is READ COMMITTED?', options: ['Allows dirty reads', 'Prevents dirty reads', 'Highest isolation', 'No isolation'], correctAnswer: 1 },
        { id: 'sql9-17', question: 'What is non-repeatable read?', options: ['Same read, same result', 'Same read, different result', 'No read', 'Dirty read'], correctAnswer: 1 },
        { id: 'sql9-18', question: 'What is REPEATABLE READ?', options: ['Allows non-repeatable reads', 'Prevents non-repeatable reads', 'Lowest isolation', 'No isolation'], correctAnswer: 1 },
        { id: 'sql9-19', question: 'What is phantom read?', options: ['New rows appear in repeated query', 'Rows disappear', 'Same rows always', 'No rows'], correctAnswer: 0 },
        { id: 'sql9-20', question: 'What is SERIALIZABLE?', options: ['Lowest isolation', 'Highest isolation', 'Medium isolation', 'No isolation'], correctAnswer: 1 },
        { id: 'sql9-21', question: 'What is deadlock?', options: ['Fast execution', 'Transactions waiting for each other', 'No waiting', 'Single transaction'], correctAnswer: 1 },
        { id: 'sql9-22', question: 'How to handle deadlock?', options: ['Ignore', 'Detect and rollback one', 'Rollback all', 'Wait forever'], correctAnswer: 1 },
        { id: 'sql9-23', question: 'What is lock?', options: ['Prevents access to resource', 'Allows access', 'Deletes resource', 'Creates resource'], correctAnswer: 0 },
        { id: 'sql9-24', question: 'What is shared lock?', options: ['Exclusive access', 'Multiple readers allowed', 'No access', 'Write access'], correctAnswer: 1 },
        { id: 'sql9-25', question: 'What is exclusive lock?', options: ['Multiple access', 'Single writer access', 'No access', 'Read only'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql9-c1',
          title: 'Transaction',
          description: 'Write "BEGIN TRANSACTION; UPDATE accounts SET balance = balance - 100 WHERE id = 1; COMMIT;" for a transaction.',
          starterCode: '-- Write the transaction\n',
          expectedOutput: 'BEGIN TRANSACTION; UPDATE accounts SET balance = balance - 100 WHERE id = 1; COMMIT;',
          testCases: [{ expectedOutput: 'BEGIN TRANSACTION; UPDATE accounts SET balance = balance - 100 WHERE id = 1; COMMIT;' }],
        },
        {
          id: 'sql9-c2',
          title: 'Rollback',
          description: 'Write "BEGIN; DELETE FROM orders; ROLLBACK;" to show rollback.',
          starterCode: '-- Write the rollback example\n',
          expectedOutput: 'BEGIN; DELETE FROM orders; ROLLBACK;',
          testCases: [{ expectedOutput: 'BEGIN; DELETE FROM orders; ROLLBACK;' }],
        },
      ],
    },
    {
      level: 10,
      title: 'Advanced SQL',
      description: 'Views, stored procedures, triggers',
      passingScore: 70,
      mcqs: [
        { id: 'sql10-1', question: 'What is a view?', options: ['Physical table', 'Virtual table from query', 'Index', 'Trigger'], correctAnswer: 1 },
        { id: 'sql10-2', question: 'How to create view?', options: ['CREATE VIEW name AS SELECT', 'MAKE VIEW name AS SELECT', 'NEW VIEW name AS SELECT', 'VIEW CREATE name AS SELECT'], correctAnswer: 0 },
        { id: 'sql10-3', question: 'Can you UPDATE through view?', options: ['Never', 'Sometimes', 'Always', 'Only DELETE'], correctAnswer: 1 },
        { id: 'sql10-4', question: 'What is materialized view?', options: ['Virtual table', 'Stored query result', 'Index', 'Trigger'], correctAnswer: 1 },
        { id: 'sql10-5', question: 'What is stored procedure?', options: ['View', 'Saved SQL code', 'Index', 'Table'], correctAnswer: 1 },
        { id: 'sql10-6', question: 'How to create stored procedure?', options: ['CREATE PROCEDURE name', 'MAKE PROCEDURE name', 'NEW PROCEDURE name', 'PROCEDURE CREATE name'], correctAnswer: 0 },
        { id: 'sql10-7', question: 'How to call stored procedure?', options: ['CALL procedure', 'EXEC procedure', 'Both (varies by DB)', 'RUN procedure'], correctAnswer: 2 },
        { id: 'sql10-8', question: 'What is function vs procedure?', options: ['Same', 'Function returns value', 'Procedure returns value', 'No difference'], correctAnswer: 1 },
        { id: 'sql10-9', question: 'What is trigger?', options: ['Manual execution', 'Auto executes on event', 'View', 'Index'], correctAnswer: 1 },
        { id: 'sql10-10', question: 'Trigger events?', options: ['INSERT', 'UPDATE', 'DELETE', 'All of above'], correctAnswer: 3 },
        { id: 'sql10-11', question: 'What is BEFORE trigger?', options: ['After event', 'Before event', 'During event', 'No event'], correctAnswer: 1 },
        { id: 'sql10-12', question: 'What is AFTER trigger?', options: ['Before event', 'After event', 'During event', 'No event'], correctAnswer: 1 },
        { id: 'sql10-13', question: 'What is INSTEAD OF trigger?', options: ['Replaces event', 'Before event', 'After event', 'No replacement'], correctAnswer: 0 },
        { id: 'sql10-14', question: 'What is cursor?', options: ['Pointer to result set', 'Table', 'Index', 'View'], correctAnswer: 0 },
        { id: 'sql10-15', question: 'Cursor operations?', options: ['OPEN, FETCH, CLOSE', 'START, GET, END', 'BEGIN, READ, FINISH', 'CREATE, SELECT, DROP'], correctAnswer: 0 },
        { id: 'sql10-16', question: 'What is dynamic SQL?', options: ['Static query', 'Query built at runtime', 'Cached query', 'Compiled query'], correctAnswer: 1 },
        { id: 'sql10-17', question: 'What is SQL injection?', options: ['Optimization', 'Security vulnerability', 'Performance feature', 'Index type'], correctAnswer: 1 },
        { id: 'sql10-18', question: 'How to prevent SQL injection?', options: ['Parameterized queries', 'String concatenation', 'Dynamic SQL', 'No prevention'], correctAnswer: 0 },
        { id: 'sql10-19', question: 'What is normalization?', options: ['Denormalizing data', 'Organizing data to reduce redundancy', 'Duplicating data', 'Deleting data'], correctAnswer: 1 },
        { id: 'sql10-20', question: 'What is 1NF?', options: ['No atomic values', 'Atomic values, no repeating groups', 'No primary key', 'Multiple tables'], correctAnswer: 1 },
        { id: 'sql10-21', question: 'What is 2NF?', options: ['1NF + no partial dependencies', '1NF only', 'No normalization', '3NF'], correctAnswer: 0 },
        { id: 'sql10-22', question: 'What is 3NF?', options: ['2NF + no transitive dependencies', '1NF only', '2NF only', 'No normalization'], correctAnswer: 0 },
        { id: 'sql10-23', question: 'What is denormalization?', options: ['More normalization', 'Adding redundancy for performance', 'Removing tables', 'Creating indexes'], correctAnswer: 1 },
        { id: 'sql10-24', question: 'What is schema?', options: ['Table', 'Database structure', 'Index', 'View'], correctAnswer: 1 },
        { id: 'sql10-25', question: 'What is data dictionary?', options: ['User data', 'Metadata about database', 'Index', 'View'], correctAnswer: 1 },
      ],
      codingChallenges: [
        {
          id: 'sql10-c1',
          title: 'CREATE VIEW',
          description: 'Write "CREATE VIEW active_users AS SELECT * FROM users WHERE status = \'active\'" to create a view.',
          starterCode: '-- Write the CREATE VIEW query\n',
          expectedOutput: "CREATE VIEW active_users AS SELECT * FROM users WHERE status = 'active'",
          testCases: [{ expectedOutput: "CREATE VIEW active_users AS SELECT * FROM users WHERE status = 'active'" }],
        },
        {
          id: 'sql10-c2',
          title: 'Stored Procedure',
          description: 'Write "CREATE PROCEDURE GetUsers() BEGIN SELECT * FROM users; END" to create a procedure.',
          starterCode: '-- Write the stored procedure\n',
          expectedOutput: 'CREATE PROCEDURE GetUsers() BEGIN SELECT * FROM users; END',
          testCases: [{ expectedOutput: 'CREATE PROCEDURE GetUsers() BEGIN SELECT * FROM users; END' }],
        },
      ],
    },
  ],
};

